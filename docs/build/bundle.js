var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(t){let e;return i(t,t=>e=t)(),e}function c(t,e,n){t.$$.on_destroy.push(i(e,n))}function u(t,e,n=e){return t.set(n),e}function a(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function h(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function y(t,e){(null!=e||t.value)&&(t.value=e)}function b(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}let k,w;function x(t,e){const n=getComputedStyle(t),r=(parseInt(n.zIndex)||0)-1;"static"===n.position&&(t.style.position="relative");const o=p("iframe");let s;return o.setAttribute("style",`display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${r};`),o.setAttribute("aria-hidden","true"),o.tabIndex=-1,!function(){if(void 0===k){k=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){k=!0}}return k}()?(o.src="about:blank",o.onload=()=>{s=h(o.contentWindow,"resize",e)}):(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=h(window,"message",t=>{t.source===o.contentWindow&&e()})),a(t,o),()=>{d(o),s&&s()}}function j(t,e,n){t.classList[n?"add":"remove"](e)}function _(t){w=t}const A=[],M=[],I=[],L=[],O=Promise.resolve();let S=!1;function E(t){I.push(t)}let N=!1;const z=new Set;function T(){if(!N){N=!0;do{for(let t=0;t<A.length;t+=1){const e=A[t];_(e),C(e.$$)}for(A.length=0;M.length;)M.pop()();for(let t=0;t<I.length;t+=1){const e=I[t];z.has(e)||(z.add(e),e())}I.length=0}while(A.length);for(;L.length;)L.pop()();S=!1,N=!1,z.clear()}}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const H=new Set;function W(t,e){t&&t.i&&(H.delete(t),t.i(e))}function J(t,e){t.d(1),e.delete(t.key)}function P(t,n,s){const{fragment:i,on_mount:l,on_destroy:c,after_update:u}=t.$$;i&&i.m(n,s),E(()=>{const n=l.map(e).filter(o);c?c.push(...n):r(n),t.$$.on_mount=[]}),u.forEach(E)}function q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(A.push(t),S||(S=!0,O.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(e,o,s,i,l,c,u=[-1]){const a=w;_(e);const f=o.props||{},p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:u};let m=!1;if(p.ctx=s?s(e,f,(t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=o)&&(p.bound[t]&&p.bound[t](o),m&&B(e,t)),n}):[],p.update(),m=!0,r(p.before_update),p.fragment=!!i&&i(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(d)}else p.fragment&&p.fragment.c();o.intro&&W(e.$$.fragment),P(e,o.target,o.anchor),T()}_(a)}class D{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const F=[];function G(e,n=t){let r;const o=[];function i(t){if(s(e,t)&&(e=t,r)){const t=!F.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),F.push(n,e)}if(t){for(let t=0;t<F.length;t+=2)F[t][0](F[t+1]);F.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,l=t){const c=[s,l];return o.push(c),1===o.length&&(r=n(i)||t),s(e),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}function K(e,n,s){const l=!Array.isArray(e),c=l?[e]:e,u=n.length<2;return function(t,e){return{subscribe:G(t,e).subscribe}}(s,e=>{let s=!1;const a=[];let f=0,d=t;const p=()=>{if(f)return;d();const r=n(l?a[0]:a,e);u?e(r):d=o(r)?r:t},m=c.map((t,e)=>i(t,t=>{a[e]=t,f&=~(1<<e),s&&p()},()=>{f|=1<<e}));return s=!0,p(),function(){r(m),d()}})}const Q=G(function(){let t=null;try{t=JSON.parse(localStorage.getItem("cyclic-timer-config"))}catch(t){console.error(t)}return t||[]}()),U=G(null);let V=G(null);const X=K(V,t=>!!t),Y=K(U,t=>null!=t);let Z=null;const tt=K([Q,U],([t,e],n)=>{if(Z=n,!t.length)return n(null);const r=e%t.length,o=null!=e&&t[r];if(!o)return n(null);n({...o,timeLeft:o.time,index:r})}),et=K([Q,U],([t,e])=>null!=e&&t.length?Math.floor(e/t.length)+1:0),nt={subscribe:Q.subscribe,set:t=>{st(),Q.set(t),function(t){localStorage.setItem("cyclic-timer-config",JSON.stringify(t))}(t)},update:t=>nt.set(t(l(Q)))},rt=()=>{const t=l(V);t&&(clearInterval(t),V.set(null))},ot=()=>{let t=l(tt);if(!t)return rt();t.timeLeft--<=0?U.update(t=>++t):Z(t)},st=()=>{it(),U.set(null)},it=()=>{rt()};const lt=t=>{if(t<0)return":";let e=Math.floor(t/60),n=t%60;return`${e<10?"0"+e:e}:${n<10?"0"+n:n}`},ct=t=>{const[e,n]=t.split(":"),r=60*parseInt(e)+parseInt(n);return isNaN(r)?0:r},ut=t=>((t,e=null)=>{let n=e,r=t.string(e);return{get value(){return n},set value(e){n=e,r=t.string(e)},get value$(){return r},set value$(e){n=t.value(e),r=e}}})({string:lt,value:ct},t);function at(e){let n,r;return{c(){n=p("div"),r=m(e[0]),v(n,"class","svelte-h9hghp")},m(t,e){f(t,n,e),a(n,r)},p(t,[e]){1&e&&$(r,t[0])},i:t,o:t,d(t){t&&d(n)}}}function ft(t,e,n){let r,{time:o=0}=e;return t.$set=t=>{"time"in t&&n(1,o=t.time)},t.$$.update=()=>{2&t.$$.dirty&&n(0,r=lt(o))},[r,o]}class dt extends D{constructor(t){super(),R(this,t,ft,at,s,{time:1})}}function pt(t,e,n){const r=t.slice();return r[19]=e[n],r[20]=e,r[21]=n,r}function mt(t){let e,n;return{c(){e=p("img"),e.src!==(n="images/play.svg")&&v(e,"src","images/play.svg"),v(e,"alt","play"),v(e,"class","svelte-kojrp3")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function gt(t){let e,n;return{c(){e=p("img"),e.src!==(n="images/pause.svg")&&v(e,"src","images/pause.svg"),v(e,"alt","pause"),v(e,"class","svelte-kojrp3")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function ht(t,e){let n,o,s,i,l,c,u;function m(){e[15].call(o,e[19])}function $(){e[16].call(i,e[19])}function b(...t){return e[17](e[21],...t)}return{key:t,first:null,c(){n=p("div"),o=p("input"),s=g(),i=p("input"),l=g(),c=p("button"),c.innerHTML='<img src="images/remove.svg" alt="remove" class="svelte-kojrp3">',o.readOnly=e[4],v(o,"class","time svelte-kojrp3"),i.readOnly=e[4],v(i,"class","name svelte-kojrp3"),v(c,"class","svelte-kojrp3"),v(n,"class","input-row svelte-kojrp3"),j(n,"active",e[21]===e[3]),this.first=n},m(t,d,p){f(t,n,d),a(n,o),y(o,e[19].time.value$),a(n,s),a(n,i),y(i,e[19].name),a(n,l),a(n,c),p&&r(u),u=[h(o,"input",m),h(i,"input",$),h(c,"click",b)]},p(t,r){e=t,16&r&&(o.readOnly=e[4]),1&r&&o.value!==e[19].time.value$&&y(o,e[19].time.value$),16&r&&(i.readOnly=e[4]),1&r&&i.value!==e[19].name&&y(i,e[19].name),9&r&&j(n,"active",e[21]===e[3])},d(t){t&&d(n),r(u)}}}function vt(t){let e,n,o,s,i,l,c,u,y,k,w,_,A,M,I,L,O,S,N=[],z=new Map;function T(t,e){return t[5]?gt:mt}let C=T(t),B=C(t);const R=new dt({props:{time:t[2]}});let D=t[0];const F=t=>t[19];for(let e=0;e<D.length;e+=1){let n=pt(t,D,e),r=F(n);z.set(r,N[e]=ht(r,n))}return{c(){var r;e=p("main"),n=p("div"),o=p("div"),s=p("button"),B.c(),i=g(),l=p("button"),l.innerHTML='<img src="images/stop.svg" alt="stop" class="svelte-kojrp3">',c=g(),u=p("div"),y=m("Round: "),k=m(t[7]),w=g(),(r=R.$$.fragment)&&r.c(),_=g();for(let t=0;t<N.length;t+=1)N[t].c();A=g(),M=p("div"),I=p("button"),I.innerHTML='<img src="images/add.svg" alt="add" class="svelte-kojrp3">',v(s,"class","svelte-kojrp3"),v(l,"class","svelte-kojrp3"),v(o,"class","buttons"),v(u,"class","round svelte-kojrp3"),v(I,"class","svelte-kojrp3"),v(M,"class","add svelte-kojrp3"),b(n,"transform","scale("+t[6]+")"),v(n,"class","svelte-kojrp3"),j(n,"running",t[5]),j(n,"started",t[4]),v(e,"class","svelte-kojrp3"),E(()=>t[18].call(e))},m(d,p,m){f(d,e,p),a(e,n),a(n,o),a(o,s),B.m(s,null),a(o,i),a(o,l),a(n,c),a(n,u),a(u,y),a(u,k),a(n,w),P(R,n,null),a(n,_);for(let t=0;t<N.length;t+=1)N[t].m(n,null);a(n,A),a(n,M),a(M,I),L=x(e,t[18].bind(e)),O=!0,m&&r(S),S=[h(s,"click",t[8]),h(l,"click",t[14]),h(I,"click",t[10])]},p(t,[e]){C!==(C=T(t))&&(B.d(1),B=C(t),B&&(B.c(),B.m(s,null))),(!O||128&e)&&$(k,t[7]);const r={};if(4&e&&(r.time=t[2]),R.$set(r),537&e){const r=t[0];N=function(t,e,n,r,o,s,i,l,c,u,a,f){let d=t.length,p=s.length,m=d;const g={};for(;m--;)g[t[m].key]=m;const h=[],v=new Map,$=new Map;for(m=p;m--;){const t=f(o,s,m),l=n(t);let c=i.get(l);c?r&&c.p(t,e):(c=u(l,t),c.c()),v.set(l,h[m]=c),l in g&&$.set(l,Math.abs(m-g[l]))}const y=new Set,b=new Set;function k(t){W(t,1),t.m(l,a,i.has(t.key)),i.set(t.key,t),a=t.first,p--}for(;d&&p;){const e=h[p-1],n=t[d-1],r=e.key,o=n.key;e===n?(a=e.first,d--,p--):v.has(o)?!i.has(r)||y.has(r)?k(e):b.has(o)?d--:$.get(r)>$.get(o)?(b.add(r),k(e)):(y.add(o),d--):(c(n,i),d--)}for(;d--;){const e=t[d];v.has(e.key)||c(e,i)}for(;p;)k(h[p-1]);return h}(N,e,F,1,t,r,z,n,J,ht,A,pt)}(!O||64&e)&&b(n,"transform","scale("+t[6]+")"),32&e&&j(n,"running",t[5]),16&e&&j(n,"started",t[4])},i(t){O||(W(R.$$.fragment,t),O=!0)},o(t){!function(t,e,n,r){if(t&&t.o){if(H.has(t))return;H.add(t),(void 0).c.push(()=>{H.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}(R.$$.fragment,t),O=!1},d(t){t&&d(e),B.d(),q(R);for(let t=0;t<N.length;t+=1)N[t].d();L(),r(S)}}}function $t(t,e,n){let r,o,s,i,a;c(t,nt,t=>n(11,r=t)),c(t,tt,t=>n(12,o=t)),c(t,Y,t=>n(4,s=t)),c(t,X,t=>n(5,i=t)),c(t,et,t=>n(7,a=t)),r&&r.length||u(nt,r=[{name:"action",time:60},{name:"break",time:15}]);const f=()=>r.map(t=>({name:t.name,time:ut(t.time)}));let d=f();const p=t=>{n(0,d=d.filter((e,n)=>t!==n))};let m=250;let g,h,v;return t.$$.update=()=>{4096&t.$$.dirty&&n(2,g=o?o.timeLeft:-1),4096&t.$$.dirty&&n(3,h=o&&o.index),4&t.$$.dirty&&(g<4&&g>0?new Audio("sound/beep-ping.mp3").play():0===g&&new Audio("sound/horn-honk.mp3").play()),8&t.$$.dirty&&null!=h&&new Audio("sound/electronic-chime.mp3").play(),2&t.$$.dirty&&n(6,v=m/250)},[d,m,g,h,s,i,v,a,()=>{if(s&&i)return it();s||(u(nt,r=d.map(t=>({name:t.name,time:t.time.value}))),n(0,d=f())),((t=!0)=>{l(X)||(t&&(U.set(null),U.set(0)),V.set(setInterval(ot,1e3)))})(!s)},p,()=>{n(0,d=[...d,{name:"new",time:ut(10)}])},r,o,f,()=>st(),function(t){t.time.value$=this.value,n(0,d)},function(t){t.name=this.value,n(0,d)},t=>p(t),function(){m=this.offsetWidth,n(1,m)}]}return new class extends D{constructor(t){super(),R(this,t,$t,vt,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
