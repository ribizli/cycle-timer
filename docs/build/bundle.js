var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function o(t){let e;return l(t,t=>e=t)(),e}function c(t,e,n){t.$$.on_destroy.push(l(e,n))}function u(t,e,n=e){return t.set(n),e}function a(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function h(){return m(" ")}function g(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.data!==e&&(t.data=e)}function $(t,e){(null!=e||t.value)&&(t.value=e)}function b(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}let k,x;function w(t,e){const n=getComputedStyle(t),s=(parseInt(n.zIndex)||0)-1;"static"===n.position&&(t.style.position="relative");const i=p("iframe");let r;return i.setAttribute("style",`display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${s};`),i.setAttribute("aria-hidden","true"),i.tabIndex=-1,!function(){if(void 0===k){k=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){k=!0}}return k}()?(i.src="about:blank",i.onload=()=>{r=g(i.contentWindow,"resize",e)}):(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=g(window,"message",t=>{t.source===i.contentWindow&&e()})),a(t,i),()=>{d(i),r&&r()}}function S(t,e,n){t.classList[n?"add":"remove"](e)}function E(t){x=t}const L=[],_=[],A=[],M=[],I=Promise.resolve();let O=!1;function T(t){A.push(t)}let N=!1;const z=new Set;function C(){if(!N){N=!0;do{for(let t=0;t<L.length;t+=1){const e=L[t];E(e),H(e.$$)}for(L.length=0;_.length;)_.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];z.has(e)||(z.add(e),e())}A.length=0}while(L.length);for(;M.length;)M.pop()();O=!1,N=!1,z.clear()}}function H(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const W=new Set;function j(t,e){t&&t.i&&(W.delete(t),t.i(e))}function B(t,e){t.d(1),e.delete(t.key)}function J(t,n,r){const{fragment:l,on_mount:o,on_destroy:c,after_update:u}=t.$$;l&&l.m(n,r),T(()=>{const n=o.map(e).filter(i);c?c.push(...n):s(n),t.$$.on_mount=[]}),u.forEach(T)}function P(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function R(t,e){-1===t.$$.dirty[0]&&(L.push(t),O||(O=!0,I.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(e,i,r,l,o,c,u=[-1]){const a=x;E(e);const f=i.props||{},p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:u};let m=!1;if(p.ctx=r?r(e,f,(t,n,...s)=>{const i=s.length?s[0]:n;return p.ctx&&o(p.ctx[t],p.ctx[t]=i)&&(p.bound[t]&&p.bound[t](i),m&&R(e,t)),n}):[],p.update(),m=!0,s(p.before_update),p.fragment=!!l&&l(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(d)}else p.fragment&&p.fragment.c();i.intro&&j(e.$$.fragment),J(e,i.target,i.anchor),C()}E(a)}class D{$destroy(){P(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const V=[];function F(e,n=t){let s;const i=[];function l(t){if(r(e,t)&&(e=t,s)){const t=!V.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),V.push(n,e)}if(t){for(let t=0;t<V.length;t+=2)V[t][0](V[t+1]);V.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(r,o=t){const c=[r,o];return i.push(c),1===i.length&&(s=n(l)||t),r(e),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(s(),s=null)}}}}function G(e,n,r){const o=!Array.isArray(e),c=o?[e]:e,u=n.length<2;return function(t,e){return{subscribe:F(t,e).subscribe}}(r,e=>{let r=!1;const a=[];let f=0,d=t;const p=()=>{if(f)return;d();const s=n(o?a[0]:a,e);u?e(s):d=i(s)?s:t},m=c.map((t,e)=>l(t,t=>{a[e]=t,f&=~(1<<e),r&&p()},()=>{f|=1<<e}));return r=!0,p(),function(){s(m),d()}})}const K=F(function(){let t=null;try{t=JSON.parse(localStorage.getItem("cyclic-timer-config"))}catch(t){console.error(t)}return t||[]}()),Q=F(null);let U=F(null);const X=G(U,t=>!!t),Y=G(Q,t=>null!=t);let Z=null;const tt=G([K,Q],([t,e],n)=>{if(Z=n,!t.length)return n(null);const s=e%t.length,i=null!=e&&t[s];if(!i)return n(null);n({...i,timeLeft:i.time,index:s})}),et=G([K,Q],([t,e])=>null!=e&&t.length?Math.floor(e/t.length)+1:0),nt={subscribe:K.subscribe,set:t=>{rt(),K.set(t),function(t){localStorage.setItem("cyclic-timer-config",JSON.stringify(t))}(t)},update:t=>nt.set(t(o(K)))},st=()=>{const t=o(U);t&&(clearInterval(t),U.set(null))},it=()=>{let t=o(tt);if(!t)return st();t.timeLeft--<=0?Q.update(t=>++t):Z(t)},rt=()=>{lt(),Q.set(null)},lt=()=>{st()};const ot=t=>{if(t<0)return":";let e=Math.floor(t/60),n=t%60;return`${e<10?"0"+e:e}:${n<10?"0"+n:n}`},ct=t=>{const[e,n]=t.split(":"),s=60*parseInt(e)+parseInt(n);return isNaN(s)?0:s},ut=t=>((t,e=null)=>{let n=e,s=t.string(e);return{get value(){return n},set value(e){n=e,s=t.string(e)},get value$(){return s},set value$(e){n=t.value(e),s=e}}})({string:ot,value:ct},t),at=t=>(t.addEventListener("keydown",pt),t.addEventListener("beforeinput",mt),t.addEventListener("input",ht),{destroy:()=>{t.removeEventListener("keydown",pt),t.addEventListener("beforeinput",mt),t.addEventListener("input",ht)}}),ft=/^\d{2}:\d{2}$/,dt=Symbol("prevValue");function pt(t){"ArrowLeft"===t.key&&3===this.selectionStart&&(this.selectionStart=this.selectionEnd=2),"ArrowRight"===t.key&&1===this.selectionStart&&(this.selectionStart=this.selectionEnd=2)}function mt(t){let e=this[dt]=this.value;if("insertText"===t.inputType)e=e.slice(0,this.selectionStart)+t.data+e.slice(this.selectionStart+1),ft.test(e)?this.selectionEnd=this.selectionStart+1:t.preventDefault();else if("deleteContentBackward"===t.inputType){let t=this.selectionStart;if(2===t)return;this.value=e.slice(0,t)+"0"+e.slice(t+1)}}function ht(t){let e=this.value;ft.test(e)||(this.value=this[dt]),2===this.selectionStart&&(this.selectionStart=this.selectionEnd=3)}function gt(e){let n,s;return{c(){n=p("div"),s=m(e[0]),v(n,"class","svelte-h9hghp")},m(t,e){f(t,n,e),a(n,s)},p(t,[e]){1&e&&y(s,t[0])},i:t,o:t,d(t){t&&d(n)}}}function vt(t,e,n){let s,{time:i=0}=e;return t.$set=t=>{"time"in t&&n(1,i=t.time)},t.$$.update=()=>{2&t.$$.dirty&&n(0,s=ot(i))},[s,i]}class yt extends D{constructor(t){super(),q(this,t,vt,gt,r,{time:1})}}function $t(t,e,n){const s=t.slice();return s[21]=e[n],s[22]=e,s[23]=n,s}function bt(t){let e,n;return{c(){e=p("img"),e.src!==(n="images/play.svg")&&v(e,"src","images/play.svg"),v(e,"alt","play"),v(e,"class","svelte-kfclxt")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function kt(t){let e,n;return{c(){e=p("img"),e.src!==(n="images/pause.svg")&&v(e,"src","images/pause.svg"),v(e,"alt","pause"),v(e,"class","svelte-kfclxt")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function xt(e,n){let r,l,o,c,u,m,y,b;function k(){n[16].call(l,n[21])}function x(){n[17].call(u,n[21])}function w(...t){return n[18](n[23],...t)}return{key:e,first:null,c(){r=p("div"),l=p("input"),c=h(),u=p("input"),m=h(),y=p("button"),y.innerHTML='<img src="images/remove.svg" alt="remove" class="svelte-kfclxt">',l.readOnly=n[5],v(l,"class","time svelte-kfclxt"),u.readOnly=n[5],v(u,"class","name svelte-kfclxt"),v(y,"class","svelte-kfclxt"),v(r,"class","input-row svelte-kfclxt"),S(r,"active",n[23]===n[4]),this.first=r},m(e,d,p){var h;f(e,r,d),a(r,l),$(l,n[21].time.value$),a(r,c),a(r,u),$(u,n[21].name),a(r,m),a(r,y),p&&s(b),b=[g(l,"input",k),(h=o=at.call(null,l),h&&i(h.destroy)?h.destroy:t),g(u,"input",x),g(y,"click",w)]},p(t,e){n=t,32&e&&(l.readOnly=n[5]),2&e&&l.value!==n[21].time.value$&&$(l,n[21].time.value$),32&e&&(u.readOnly=n[5]),2&e&&u.value!==n[21].name&&$(u,n[21].name),18&e&&S(r,"active",n[23]===n[4])},d(t){t&&d(r),s(b)}}}function wt(t){let e,n,i,r,l,o,c,u,$,k,x,E,L,_,A,M,I,O,N,z,C=[],H=new Map;function R(t,e){return t[6]?kt:bt}let q=R(t),D=q(t);const V=new yt({props:{time:t[3]}});let F=t[1];const G=t=>t[21];for(let e=0;e<F.length;e+=1){let n=$t(t,F,e),s=G(n);H.set(s,C[e]=xt(s,n))}return{c(){var s;e=p("main"),n=p("div"),i=p("div"),r=p("button"),D.c(),l=h(),o=p("button"),o.innerHTML='<img src="images/stop.svg" alt="stop" class="svelte-kfclxt">',c=h(),u=p("div"),$=m("Round: "),k=m(t[8]),x=h(),(s=V.$$.fragment)&&s.c(),E=h();for(let t=0;t<C.length;t+=1)C[t].c();L=h(),_=p("div"),A=p("button"),A.innerHTML='<img src="images/add.svg" alt="add" class="svelte-kfclxt">',I=h(),O=p("video"),O.innerHTML='<source src="video/blank.m4v"><source src="video/blank.ogv" type="video/ogg"><source src="video/blank.webm" type="video/webm">',v(r,"class","svelte-kfclxt"),v(o,"class","svelte-kfclxt"),v(i,"class","buttons"),v(u,"class","round svelte-kfclxt"),v(A,"class","svelte-kfclxt"),v(_,"class","add svelte-kfclxt"),b(n,"transform","scale("+t[7]+")"),v(n,"class","svelte-kfclxt"),S(n,"running",t[6]),S(n,"started",t[5]),v(e,"class","svelte-kfclxt"),T(()=>t[19].call(e)),O.loop=!0,O.muted=!0,O.playsInline=!0,v(O,"class","svelte-kfclxt")},m(d,p,m){f(d,e,p),a(e,n),a(n,i),a(i,r),D.m(r,null),a(i,l),a(i,o),a(n,c),a(n,u),a(u,$),a(u,k),a(n,x),J(V,n,null),a(n,E);for(let t=0;t<C.length;t+=1)C[t].m(n,null);a(n,L),a(n,_),a(_,A),M=w(e,t[19].bind(e)),f(d,I,p),f(d,O,p),t[20](O),N=!0,m&&s(z),z=[g(r,"click",t[9]),g(o,"click",t[10]),g(A,"click",t[12])]},p(t,[e]){q!==(q=R(t))&&(D.d(1),D=q(t),D&&(D.c(),D.m(r,null))),(!N||256&e)&&y(k,t[8]);const s={};if(8&e&&(s.time=t[3]),V.$set(s),2098&e){const s=t[1];C=function(t,e,n,s,i,r,l,o,c,u,a,f){let d=t.length,p=r.length,m=d;const h={};for(;m--;)h[t[m].key]=m;const g=[],v=new Map,y=new Map;for(m=p;m--;){const t=f(i,r,m),o=n(t);let c=l.get(o);c?s&&c.p(t,e):(c=u(o,t),c.c()),v.set(o,g[m]=c),o in h&&y.set(o,Math.abs(m-h[o]))}const $=new Set,b=new Set;function k(t){j(t,1),t.m(o,a,l.has(t.key)),l.set(t.key,t),a=t.first,p--}for(;d&&p;){const e=g[p-1],n=t[d-1],s=e.key,i=n.key;e===n?(a=e.first,d--,p--):v.has(i)?!l.has(s)||$.has(s)?k(e):b.has(i)?d--:y.get(s)>y.get(i)?(b.add(s),k(e)):($.add(i),d--):(c(n,l),d--)}for(;d--;){const e=t[d];v.has(e.key)||c(e,l)}for(;p;)k(g[p-1]);return g}(C,e,G,1,t,s,H,n,B,xt,L,$t)}(!N||128&e)&&b(n,"transform","scale("+t[7]+")"),64&e&&S(n,"running",t[6]),32&e&&S(n,"started",t[5])},i(t){N||(j(V.$$.fragment,t),N=!0)},o(t){!function(t,e,n,s){if(t&&t.o){if(W.has(t))return;W.add(t),(void 0).c.push(()=>{W.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}}(V.$$.fragment,t),N=!1},d(n){n&&d(e),D.d(),P(V);for(let t=0;t<C.length;t+=1)C[t].d();M(),n&&d(I),n&&d(O),t[20](null),s(z)}}}function St(t,e,n){let s,i,r,l,a,f;c(t,nt,t=>n(13,s=t)),c(t,tt,t=>n(14,i=t)),c(t,Y,t=>n(5,r=t)),c(t,X,t=>n(6,l=t)),c(t,et,t=>n(8,a=t)),s&&s.length||u(nt,s=[{name:"action",time:60},{name:"break",time:15}]);const d=()=>s.map(t=>({name:t.name,time:ut(t.time)}));let p=d();const m=t=>{n(1,p=p.filter((e,n)=>t!==n))};let h=250;let g,v,y;return t.$$.update=()=>{16384&t.$$.dirty&&n(3,g=i?i.timeLeft:-1),16384&t.$$.dirty&&n(4,v=i&&i.index),8&t.$$.dirty&&(g<4&&g>0?new Audio("sound/beep-ping.mp3").play():0===g&&new Audio("sound/horn-honk.mp3").play()),16&t.$$.dirty&&null!=v&&new Audio("sound/electronic-chime.mp3").play(),4&t.$$.dirty&&n(7,y=h/250)},[f,p,h,g,v,r,l,y,a,()=>{if(r&&l)return f.pause(),lt();r||(u(nt,s=p.map(t=>({name:t.name,time:t.time.value}))),n(1,p=d())),f.play(),((t=!0)=>{o(X)||(t&&(Q.set(null),Q.set(0)),U.set(setInterval(it,1e3)))})(!r)},()=>{f.pause(),rt()},m,()=>{n(1,p=[...p,{name:"new",time:ut(10)}])},s,i,d,function(t){t.time.value$=this.value,n(1,p)},function(t){t.name=this.value,n(1,p)},t=>m(t),function(){h=this.offsetWidth,n(2,h)},function(t){_[t?"unshift":"push"](()=>{n(0,f=t)})}]}return new class extends D{constructor(t){super(),q(this,t,St,wt,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
