var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function o(t){let e;return c(t,t=>e=t)(),e}function u(t,e,n){t.$$.on_destroy.push(c(e,n))}function i(t,e,n=e){return t.set(n),e}function a(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function p(){return g(" ")}function h(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function y(t,e){(null!=e||t.value)&&(t.value=e)}function b(t,e,n){t.classList[n?"add":"remove"](e)}let k;function x(t){k=t}const w=[],_=[],M=[],A=[],L=Promise.resolve();let O=!1;function S(t){M.push(t)}let E=!1;const N=new Set;function I(){if(!E){E=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];x(e),T(e.$$)}for(w.length=0;_.length;)_.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];N.has(e)||(N.add(e),e())}M.length=0}while(w.length);for(;A.length;)A.pop()();O=!1,E=!1,N.clear()}}function T(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const H=new Set;function j(t,e){t&&t.i&&(H.delete(t),t.i(e))}function C(t,e){t.d(1),e.delete(t.key)}function J(t,n,s){const{fragment:c,on_mount:o,on_destroy:u,after_update:i}=t.$$;c&&c.m(n,s),S(()=>{const n=o.map(e).filter(r);u?u.push(...n):l(n),t.$$.on_mount=[]}),i.forEach(S)}function q(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(w.push(t),O||(O=!0,L.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(e,r,s,c,o,u,i=[-1]){const a=k;x(e);const f=r.props||{},m=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:i};let g=!1;if(m.ctx=s?s(e,f,(t,n,...l)=>{const r=l.length?l[0]:n;return m.ctx&&o(m.ctx[t],m.ctx[t]=r)&&(m.bound[t]&&m.bound[t](r),g&&B(e,t)),n}):[],m.update(),g=!0,l(m.before_update),m.fragment=!!c&&c(m.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);m.fragment&&m.fragment.l(t),t.forEach(d)}else m.fragment&&m.fragment.c();r.intro&&j(e.$$.fragment),J(e,r.target,r.anchor),I()}x(a)}class R{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const z=[];function D(e,n=t){let l;const r=[];function c(t){if(s(e,t)&&(e=t,l)){const t=!z.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),z.push(n,e)}if(t){for(let t=0;t<z.length;t+=2)z[t][0](z[t+1]);z.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(s,o=t){const u=[s,o];return r.push(u),1===r.length&&(l=n(c)||t),s(e),()=>{const t=r.indexOf(u);-1!==t&&r.splice(t,1),0===r.length&&(l(),l=null)}}}}function F(e,n,s){const o=!Array.isArray(e),u=o?[e]:e,i=n.length<2;return function(t,e){return{subscribe:D(t,e).subscribe}}(s,e=>{let s=!1;const a=[];let f=0,d=t;const m=()=>{if(f)return;d();const l=n(o?a[0]:a,e);i?e(l):d=r(l)?l:t},g=u.map((t,e)=>c(t,t=>{a[e]=t,f&=~(1<<e),s&&m()},()=>{f|=1<<e}));return s=!0,m(),function(){l(g),d()}})}const G=D(function(){let t=null;try{t=JSON.parse(localStorage.getItem("cyclic-timer-config"))}catch(t){console.error(t)}return t||[]}()),K=D(null);let Q=D(null);const U=F(Q,t=>!!t),V=F(K,t=>null!=t);let W=null;const X=F([G,K],([t,e],n)=>{if(W=n,!t.length)return n(null);const l=e%t.length,r=null!=e&&t[l];if(!r)return n(null);n({...r,timeLeft:r.time,index:l})}),Y=F([G,K],([t,e])=>null!=e&&t.length?Math.floor(e/t.length)+1:0),Z={subscribe:G.subscribe,set:t=>{nt(),G.set(t),function(t){localStorage.setItem("cyclic-timer-config",JSON.stringify(t))}(t)},update:t=>Z.set(t(o(G)))},tt=()=>{const t=o(Q);t&&(clearInterval(t),Q.set(null))},et=()=>{let t=o(X);if(!t)return tt();t.timeLeft--<=0?K.update(t=>++t):W(t)},nt=()=>{lt(),K.set(null)},lt=()=>{tt()};const rt=t=>{let e=t%60;return`${Math.floor(t/60)}:${e<10?"0":""}${e}`},st=t=>{const[e,n]=t.split(":"),l=60*parseInt(e)+parseInt(n);return isNaN(l)?0:l},ct=t=>((t,e=null)=>{let n=e,l=t.string(e);return{get value(){return n},set value(e){n=e,l=t.string(e)},get value$(){return l},set value$(e){l=e,n=t.value(e)}}})({string:rt,value:st},t);function ot(e){let n,l;return{c(){n=m("div"),l=g(e[0]),v(n,"class","svelte-5rc7cf")},m(t,e){f(t,n,e),a(n,l)},p(t,[e]){1&e&&$(l,t[0])},i:t,o:t,d(t){t&&d(n)}}}function ut(t,e,n){let l,{time:r=0}=e;return t.$set=t=>{"time"in t&&n(1,r=t.time)},t.$$.update=()=>{2&t.$$.dirty&&n(0,l=rt(r))},[l,r]}class it extends R{constructor(t){super(),P(this,t,ut,ot,s,{time:1})}}function at(t,e,n){const l=t.slice();return l[15]=e[n],l[16]=e,l[17]=n,l}function ft(t){let e,n;return{c(){e=m("img"),e.src!==(n="images/play.svg")&&v(e,"src","images/play.svg"),v(e,"alt","play"),v(e,"class","svelte-a7t1l1")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function dt(t){let e,n;return{c(){e=m("img"),e.src!==(n="images/pause.svg")&&v(e,"src","images/pause.svg"),v(e,"alt","pause"),v(e,"class","svelte-a7t1l1")},m(t,n){f(t,e,n)},d(t){t&&d(e)}}}function mt(t,e){let n,r,s,c,o,u,i;function g(){e[12].call(r,e[15])}function $(){e[13].call(c,e[15])}function k(...t){return e[14](e[17],...t)}return{key:t,first:null,c(){n=m("div"),r=m("input"),s=p(),c=m("input"),o=p(),u=m("button"),u.innerHTML='<img src="images/remove.svg" alt="remove" class="svelte-a7t1l1">',r.readOnly=e[3],v(r,"class","time svelte-a7t1l1"),c.readOnly=e[3],v(c,"class","name svelte-a7t1l1"),v(u,"class","svelte-a7t1l1"),v(n,"class","input-row svelte-a7t1l1"),b(n,"active",e[17]===e[2]),this.first=n},m(t,d,m){f(t,n,d),a(n,r),y(r,e[15].time.value$),a(n,s),a(n,c),y(c,e[15].name),a(n,o),a(n,u),m&&l(i),i=[h(r,"input",g),h(c,"input",$),h(u,"click",k)]},p(t,l){e=t,8&l&&(r.readOnly=e[3]),1&l&&r.value!==e[15].time.value$&&y(r,e[15].time.value$),8&l&&(c.readOnly=e[3]),1&l&&c.value!==e[15].name&&y(c,e[15].name),5&l&&b(n,"active",e[17]===e[2])},d(t){t&&d(n),l(i)}}}function gt(t){let e,n,r,s,c,o,u,i,y,k,x,w,_,M,A,L,O,S=[],E=new Map;function N(t,e){return t[4]?dt:ft}let I=N(t),T=I(t);const B=new it({props:{time:t[1]}});let P=t[0];const R=t=>t[15];for(let e=0;e<P.length;e+=1){let n=at(t,P,e),l=R(n);E.set(l,S[e]=mt(l,n))}return{c(){var l;e=m("main"),n=m("div"),r=m("div"),s=m("button"),T.c(),c=p(),o=m("button"),o.innerHTML='<img src="images/stop.svg" alt="stop" class="svelte-a7t1l1">',u=p(),i=m("div"),y=g("Round: "),k=g(t[5]),x=p(),(l=B.$$.fragment)&&l.c(),w=p();for(let t=0;t<S.length;t+=1)S[t].c();_=p(),M=m("div"),A=m("button"),A.innerHTML='<img src="images/add.svg" alt="add" class="svelte-a7t1l1">',v(s,"class","svelte-a7t1l1"),v(o,"class","svelte-a7t1l1"),v(r,"class","buttons"),v(i,"class","round"),v(A,"class","svelte-a7t1l1"),v(M,"class","add svelte-a7t1l1"),v(n,"class","svelte-a7t1l1"),b(n,"running",t[4]),b(n,"started",t[3]),v(e,"class","svelte-a7t1l1")},m(d,m,g){f(d,e,m),a(e,n),a(n,r),a(r,s),T.m(s,null),a(r,c),a(r,o),a(n,u),a(n,i),a(i,y),a(i,k),a(n,x),J(B,n,null),a(n,w);for(let t=0;t<S.length;t+=1)S[t].m(n,null);a(n,_),a(n,M),a(M,A),L=!0,g&&l(O),O=[h(s,"click",t[6]),h(o,"click",t[11]),h(A,"click",t[8])]},p(t,[e]){I!==(I=N(t))&&(T.d(1),T=I(t),T&&(T.c(),T.m(s,null))),(!L||32&e)&&$(k,t[5]);const l={};if(2&e&&(l.time=t[1]),B.$set(l),141&e){const l=t[0];S=function(t,e,n,l,r,s,c,o,u,i,a,f){let d=t.length,m=s.length,g=d;const p={};for(;g--;)p[t[g].key]=g;const h=[],v=new Map,$=new Map;for(g=m;g--;){const t=f(r,s,g),o=n(t);let u=c.get(o);u?l&&u.p(t,e):(u=i(o,t),u.c()),v.set(o,h[g]=u),o in p&&$.set(o,Math.abs(g-p[o]))}const y=new Set,b=new Set;function k(t){j(t,1),t.m(o,a,c.has(t.key)),c.set(t.key,t),a=t.first,m--}for(;d&&m;){const e=h[m-1],n=t[d-1],l=e.key,r=n.key;e===n?(a=e.first,d--,m--):v.has(r)?!c.has(l)||y.has(l)?k(e):b.has(r)?d--:$.get(l)>$.get(r)?(b.add(l),k(e)):(y.add(r),d--):(u(n,c),d--)}for(;d--;){const e=t[d];v.has(e.key)||u(e,c)}for(;m;)k(h[m-1]);return h}(S,e,R,1,t,l,E,n,C,mt,_,at)}16&e&&b(n,"running",t[4]),8&e&&b(n,"started",t[3])},i(t){L||(j(B.$$.fragment,t),L=!0)},o(t){!function(t,e,n,l){if(t&&t.o){if(H.has(t))return;H.add(t),(void 0).c.push(()=>{H.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}}(B.$$.fragment,t),L=!1},d(t){t&&d(e),T.d(),q(B);for(let t=0;t<S.length;t+=1)S[t].d();l(O)}}}function pt(t,e,n){let l,r,s,c,a;u(t,Z,t=>n(9,l=t)),u(t,X,t=>n(10,r=t)),u(t,V,t=>n(3,s=t)),u(t,U,t=>n(4,c=t)),u(t,Y,t=>n(5,a=t)),console.log(l),l&&l.length||i(Z,l=[{name:"action",time:60},{name:"break",time:15}]);let f=l.map(t=>({name:t.name,time:ct(t.time)}));const d=t=>{n(0,f=f.filter((e,n)=>t!==n))};let m,g;return t.$$.update=()=>{1024&t.$$.dirty&&n(1,m=r&&r.timeLeft||0),1024&t.$$.dirty&&n(2,g=r&&r.index),2&t.$$.dirty&&(m<4&&m>0?new Audio("sound/beep-ping.mp3").play():0===m&&new Audio("sound/horn-honk.mp3").play()),4&t.$$.dirty&&null!=g&&new Audio("sound/electronic-chime.mp3").play()},[f,m,g,s,c,a,()=>{if(s&&c)return lt();s||i(Z,l=f.map(t=>({name:t.name,time:t.time.value}))),((t=!0)=>{o(U)||(t&&(K.set(null),K.set(0)),Q.set(setInterval(et,1e3)))})(!s)},d,()=>{n(0,f=[...f,{name:"new",time:ct(0)}])},l,r,()=>nt(),function(t){t.time.value$=this.value,n(0,f)},function(t){t.name=this.value,n(0,f)},t=>d(t)]}return new class extends R{constructor(t){super(),P(this,t,pt,gt,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
